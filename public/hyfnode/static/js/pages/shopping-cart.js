function addProduct(i,t,a,e){var n=$(".shopping-cart-wrap .shopping-cart img").offset();$('<div class="fly-buy-number">'+a+"</div>").fly({start:{left:i,top:t},end:{left:n.left+15,top:n.top-$(window).scrollTop()},autoPlay:!0,speed:1.5,vertex_Rtop:10,onEnd:function(){$(".fly-buy-number").remove(),$(".shopping-cart-wrap .shopping-cart img:first-child").animate({width:"4rem"},{duration:150,easing:"ease",complete:function(){$(".shopping-cart-wrap .shopping-cart img:first-child").animate({width:"3.32rem"},{duration:150,easing:"ease",complete:totalPrice(e)})}})}})}function totalPrice(i){var t=$(".shopping-cart-wrap .buy-number-total").text();t?$(".shopping-cart-wrap .buy-number-total").text(+t+1):$(".shopping-cart-wrap .buy-number-total").text("1").show();var a=(+$(".shopping-cart-wrap .shopping-cart .total-price").text()+ +i).toFixed(2);$(".shopping-cart-wrap .shopping-cart .total-price").text(a)}$(".prices-content-wrap, .taocan-wrap").on("click",".price-box, .taocan-pic-cell, .curtain-content .small-bag, .curtain-content .big-bag, .small-bag-img, .big-bag-img",function(i){if(!$.contains($("footer").get(0),$(".shopping-cart-wrap").get(0))){var t=template("shopping-cart",{});$("footer").html(t)}$(this).children(".buy-number").show();var a=$(this).find(".price").text(),e=$(this).children(".buy-number").text();e?$(this).children(".buy-number").text(+e+1):$(this).children(".buy-number").text("1");var n=$(this).children(".buy-number").offset();addProduct(n.left,n.top-$(window).scrollTop(),+e+1,a);var r={};r.id=$(this).data("id"),r.category_id=$("header ul .active").data("id"),r.washing_name=$(this).find(".washing-name").text(),1070==+$(this).data("category-id")&&(r.washing_name="按袋洗"),$(this).find(".pic-box img").length>0&&(r.image=$(this).find(".pic-box img").prop("src")),$(this).find(".taocan-pic-cell img").length&&(r.image=$(this).find(".taocan-pic-cell img").prop("src")),$(this).find(".small-bag img").length&&(r.image=$(this).find(".small-bag img").prop("src")),$(this).find(".big-bag img").length&&(r.image=$(this).find(".big-bag img").prop("src")),$(this).find(".small-bag-img img").length&&(r.image=$(this).find(".small-bag-img img").prop("src")),$(this).find(".big-bag-img img").length&&(r.image=$(this).find(".big-bag-img img").prop("src")),r.order=e?+e+1:1,r.price=a,r.selected=!0;var o=window.sessionStorage,g=JSON.parse(o.getItem("productInfo"));if(console.log(g,"begin"),g){for(var s=g.washing.length,p=0;p<s;p++)if(+r.id==+g.washing[p].id){g.washing[p]=r;break}p===s&&g.washing.push(r)}else{var c={};c.washing=[r],g=c}o.setItem("productInfo",JSON.stringify(g)),console.log(g,"end")});